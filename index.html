<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Job Application Tracker</title>
<style>
  body {
    font-family: 'Segoe UI', sans-serif;
    margin: 0;
    background: #f5f6fa;
    color: #333;
  }
  header {
    background: #2f3640;
    color: white;
    padding: 15px 20px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }
  header h1 {
    margin: 0;
    font-size: 20px;
  }
  header button {
    background: #00a8ff;
    border: none;
    padding: 8px 15px;
    color: white;
    border-radius: 4px;
    cursor: pointer;
  }
  nav {
    background: #353b48;
    color: white;
    display: flex;
    padding: 10px;
    gap: 10px;
  }
  nav button {
    background: transparent;
    border: none;
    color: white;
    cursor: pointer;
    padding: 8px 12px;
  }
  nav button.active {
    background: #00a8ff;
    border-radius: 4px;
  }
  main {
    padding: 20px;
  }
  .job-card {
    background: white;
    border-radius: 8px;
    padding: 15px;
    display: flex;
    align-items: center;
    gap: 15px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    margin-bottom: 15px;
    cursor: pointer;
    transition: transform 0.2s ease;
  }
  .job-card:hover {
    transform: scale(1.02);
  }
  .job-card img {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 6px;
  }
  .job-info {
    flex: 1;
  }
  .job-info h3 {
    margin: 0;
    font-size: 18px;
  }
  .status {
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 12px;
    display: inline-block;
  }
  .Applied { background: #ffeaa7; }
  .Interviewing { background: #74b9ff; }
  .Offer { background: #55efc4; }
  .Rejected { background: #fab1a0; }
  form {
    max-width: 500px;
    margin: auto;
    background: white;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
  }
  form input, form select, form textarea {
    width: 100%;
    padding: 10px;
    margin: 8px 0;
    border-radius: 4px;
    border: 1px solid #ccc;
  }
  form button {
    background: #00a8ff;
    color: white;
    border: none;
    padding: 10px;
    cursor: pointer;
    border-radius: 4px;
    margin-top: 10px;
  }
  .actions {
    margin-top: 15px;
  }
  .actions button {
    margin-right: 10px;
  }
  @media(max-width: 600px) {
    nav {
      flex-wrap: wrap;
    }
  }
</style>
</head>
<body>
<header>
  <h1>Job Tracker</h1>
  <div>
    <button onclick="exportData()">Export JSON</button>
    <input type="file" id="importFile" style="display:none" onchange="importData(event)">
    <button onclick="document.getElementById('importFile').click()">Import JSON</button>
  </div>
</header>
<nav>
  <button onclick="showPage('dashboard')" class="active">Dashboard</button>
  <button onclick="showPage('add')">Add Job</button>
</nav>
<main id="content"></main>

<script>
let jobs = JSON.parse(localStorage.getItem('jobs') || '[]');
let currentPage = 'dashboard';
let selectedJobIndex = null;

function saveJobs() {
  localStorage.setItem('jobs', JSON.stringify(jobs));
}

function showPage(page) {
  currentPage = page;
  document.querySelectorAll('nav button').forEach(btn => btn.classList.remove('active'));
  document.querySelector(`nav button[onclick="showPage('${page}')"]`).classList.add('active');
  render();
}

function render() {
  const content = document.getElementById('content');
  if (currentPage === 'dashboard') {
    content.innerHTML = `
      <input type="text" placeholder="Search by company..." oninput="filterJobs(this.value)" style="width:100%;padding:10px;margin-bottom:15px;border-radius:4px;border:1px solid #ccc;">
      ${jobs.map((job, i) => `
        <div class="job-card" onclick="viewJob(${i})">
          <img src="${job.logo}" alt="logo">
          <div class="job-info">
            <h3>${job.company}</h3>
            <p>${job.title}</p>
            <span class="status ${job.status}">${job.status}</span>
          </div>
          <small>${job.date}</small>
        </div>
      `).join('')}
    `;
  }
  else if (currentPage === 'add') {
    content.innerHTML = `
      <form onsubmit="addJob(event)">
        <input type="text" placeholder="Company Name" id="company" required>
        <input type="text" placeholder="Job Title" id="title" required>
        <select id="status">
          <option>Applied</option>
          <option>Interviewing</option>
          <option>Offer</option>
          <option>Rejected</option>
        </select>
        <input type="date" id="date" required>
        <input type="url" placeholder="Company Logo URL" id="logo" value="https://via.placeholder.com/50">
        <textarea placeholder="Notes" id="notes"></textarea>
        <button type="submit">Save Job</button>
      </form>
    `;
  }
  else if (currentPage === 'details') {
    const job = jobs[selectedJobIndex];
    content.innerHTML = `
      <div class="job-card">
        <img src="${job.logo}" alt="logo">
        <div class="job-info">
          <h3>${job.company}</h3>
          <p>${job.title}</p>
          <span class="status ${job.status}">${job.status}</span>
        </div>
        <small>${job.date}</small>
      </div>
      <p><strong>Notes:</strong> ${job.notes || 'None'}</p>
      <div class="actions">
        <button onclick="editJob(${selectedJobIndex})">Edit</button>
        <button onclick="deleteJob(${selectedJobIndex})">Delete</button>
        <button onclick="showPage('dashboard')">Back</button>
      </div>
    `;
  }
}

function filterJobs(keyword) {
  keyword = keyword.toLowerCase();
  const filtered = jobs.filter(job => job.company.toLowerCase().includes(keyword));
  const content = document.getElementById('content');
  content.innerHTML = filtered.map((job, i) => `
    <div class="job-card" onclick="viewJob(${i})">
      <img src="${job.logo}" alt="logo">
      <div class="job-info">
        <h3>${job.company}</h3>
        <p>${job.title}</p>
        <span class="status ${job.status}">${job.status}</span>
      </div>
      <small>${job.date}</small>
    </div>
  `).join('');
}

function addJob(e) {
  e.preventDefault();
  const job = {
    company: document.getElementById('company').value,
    title: document.getElementById('title').value,
    status: document.getElementById('status').value,
    date: document.getElementById('date').value,
    logo: document.getElementById('logo').value,
    notes: document.getElementById('notes').value
  };
  jobs.push(job);
  saveJobs();
  showPage('dashboard');
}

function viewJob(index) {
  selectedJobIndex = index;
  currentPage = 'details';
  render();
}

function editJob(index) {
  const job = jobs[index];
  document.getElementById('content').innerHTML = `
    <form onsubmit="updateJob(event, ${index})">
      <input type="text" value="${job.company}" id="company" required>
      <input type="text" value="${job.title}" id="title" required>
      <select id="status">
        <option ${job.status==='Applied'?'selected':''}>Applied</option>
        <option ${job.status==='Interviewing'?'selected':''}>Interviewing</option>
        <option ${job.status==='Offer'?'selected':''}>Offer</option>
        <option ${job.status==='Rejected'?'selected':''}>Rejected</option>
      </select>
      <input type="date" value="${job.date}" id="date" required>
      <input type="url" value="${job.logo}" id="logo">
      <textarea id="notes">${job.notes}</textarea>
      <button type="submit">Update Job</button>
    </form>
  `;
}

function updateJob(e, index) {
  e.preventDefault();
  jobs[index] = {
    company: document.getElementById('company').value,
    title: document.getElementById('title').value,
    status: document.getElementById('status').value,
    date: document.getElementById('date').value,
    logo: document.getElementById('logo').value,
    notes: document.getElementById('notes').value
  };
  saveJobs();
  showPage('dashboard');
}

function deleteJob(index) {
  if (confirm('Delete this job?')) {
    jobs.splice(index, 1);
    saveJobs();
    showPage('dashboard');
  }
}

function exportData() {
  const blob = new Blob([JSON.stringify(jobs)], { type: 'application/json' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = 'jobs.json';
  a.click();
}

function importData(e) {
  const file = e.target.files[0];
  const reader = new FileReader();
  reader.onload = function(evt) {
    try {
      jobs = JSON.parse(evt.target.result);
      saveJobs();
      showPage('dashboard');
    } catch {
      alert('Invalid JSON file.');
    }
  };
  reader.readAsText(file);
}

render();
</script>
</body>
</html>